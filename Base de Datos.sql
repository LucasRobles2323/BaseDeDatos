-- MySQL Script generated by MySQL Workbench
-- Sat Jun 17 18:23:01 2023
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `mydb` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`Ocupacion`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Ocupacion` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Ocupacion` (
  `codigoOcupacion` INT NOT NULL,
  `nombre` VARCHAR(15) NOT NULL,
  `sueldo` INT NOT NULL,
  PRIMARY KEY (`codigoOcupacion`),
  UNIQUE INDEX `codigoOcupación_UNIQUE` (`codigoOcupacion` ASC))
ENGINE = InnoDB;
-- -----------------------------------------------------
-- Poblar Table `mydb`.`Ocupacion`
-- -----------------------------------------------------
INSERT INTO Ocupacion(codigoOcupacion, nombre, sueldo)
    Values
    ('124' , 'Gerente General' , '5000000' ),
    ('125' , 'Ingeniería Civil Informática' , '650000' ),
    ('126' , 'Ingeniería Civil en Ciencia de Datos' , '300000' ),
    ('127' , 'Ingeniería Civil en Telecomunicaciones' , '400000' ),
    ('128' , 'Ingeniería Civil Electrónica' , '3500000' );

-- -----------------------------------------------------
-- Table `mydb`.`Departamento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Departamento` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Departamento` (
  `codigoUnico` INT NOT NULL,
  `fechaIniGerente` DATETIME NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  `esOperativo` ENUM('0', '1') NOT NULL DEFAULT '0',
  PRIMARY KEY (`codigoUnico`),
  UNIQUE INDEX `codigoUnicoOperativo_UNIQUE` (`codigoUnico` ASC))
ENGINE = InnoDB;
-- -----------------------------------------------------
-- Poblar Table `mydb`.`Departamento`
-- -----------------------------------------------------
INSERT INTO Departamento(codigoUnico, nombre, fechaIniGerente, esOperativo)
    Values
    ('024' , 'Rojo' , '2014-01-20 13:00:55' , '0'),
    ('025' , 'Azul' , '2015-01-20 13:00:55' , '1' ),
    ('026' , 'Negro' , '2016-01-20 13:00:55' , '0' ),
    ('027' , 'Blanco' , '2017-01-20 13:00:55' , '1' ),
    ('028' , 'Naranjo' , '2018-01-20 13:00:55' , '1');

-- -----------------------------------------------------
-- Table `mydb`.`Personal`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Personal` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Personal` (
  `idPersonal` VARCHAR(20) NOT NULL,
  `Personal_idPersonal` VARCHAR(20) NOT NULL,
  `Ocupacion_codigoOcupacion` INT NOT NULL,
  `Departamento_codigoUnico` INT NOT NULL,
  `nombres` VARCHAR(15) NOT NULL,
  `primerApellido` VARCHAR(15) NOT NULL,
  `segundoApellido` VARCHAR(15) NOT NULL,
  `sexo` ENUM('0', '1', '2') NOT NULL DEFAULT '0', -- 0 = Masculino | 1 = Femenino | 2 = No Binario
  `direccion` VARCHAR(200) NOT NULL,
  `fechaNacPersonal` DATE NOT NULL,
  `asignacionesExtras` INT NOT NULL,
  PRIMARY KEY (`idPersonal`),
  UNIQUE INDEX `idPersonal_UNIQUE` (`idPersonal` ASC),
  INDEX `fk_Personal_Ocupacion1_idx` (`Ocupacion_codigoOcupacion` ASC),
  INDEX `fk_Personal_Personal1_idx` (`Personal_idPersonal` ASC),
  INDEX `fk_Personal_Departamento1_idx` (`Departamento_codigoUnico` ASC),
  CONSTRAINT `fk_Personal_Ocupacion1`
    FOREIGN KEY (`Ocupacion_codigoOcupacion`)
    REFERENCES `mydb`.`Ocupacion` (`codigoOcupacion`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Personal_Personal1`
    FOREIGN KEY (`Personal_idPersonal`)
    REFERENCES `mydb`.`Personal` (`idPersonal`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Personal_Departamento1`
    FOREIGN KEY (`Departamento_codigoUnico`)
    REFERENCES `mydb`.`Departamento` (`codigoUnico`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
-- -----------------------------------------------------
-- Poblar Table `mydb`.`Personal`
-- -----------------------------------------------------
INSERT INTO Personal(idPersonal, Personal_idPersonal, Ocupacion_codigoOcupacion, 
        Departamento_codigoUnico, nombres, primerApellido, segundoApellido, 
        sexo, direccion, fechaNacPersonal, asignacionesExtras)
    Values
    ('1002' , '1002' , '124' , '024', 'Lucas', 'Robles', 'Chávez', '0', 
      'Condomino Los Arboles Casa 01, Valparaiso', '2000-09-23', '100000'),
    ('1003' , '1006' , '125' , '025', 'Vicente', 'Morales', 'Maturano', '0', 
      'Condomino Los Arboles Casa 02, Valparaiso', '2000-09-24', '250000'),
    ('1004' , '1005' , '127' , '026', 'Gerald', 'Espinoza', 'Tapia', '0',
      'Condomino Los Arboles Casa 03, Valparaiso', '2000-09-25', '300000'),
    ('1005' , '1003' , '126' , '027', 'Guillermo', 'Itoca' , 'Amerio', '0',
      'Condomino Los Arboles Casa 04, Valparaiso', '2000-08-23', '0'),
    ('1006' , '1004' , '128' , '028', 'María', 'Gonzales', 'Sánchez', '1',
      'Condomino Los Arboles Casa 05, Valparaiso', '2000-08-24', '0'),
    ('1007' , '1002' , '125' , '024', 'Jazmin', 'Rojas', 'Vargas', '1',
      'Condomino Los Arboles Casa 06, Valparaiso', '2000-08-25', '0'),
    ('1008' , '1006' , '126' , '025', 'Delia', 'Torres', 'Mendoza', '1',
      'Condomino Los Arboles Casa 07, Valparaiso', '2000-07-23', '0'),
    ('1009' , '1005' , '127' , '026', 'Julio', 'Robles', 'Bravo', '0',
      'Condomino Los Arboles Casa 08, Valparaiso', '2000-07-24', '0'),
    ('1010' , '1003' , '128' , '027', 'Mirna', 'Chávez', 'Cuyotupac', '1',
      'Condomino Los Arboles Casa 09, Valparaiso', '2000-07-22', '500000'),
    ('1011' , '1004' , '125' , '028', 'Bernarda', 'Bravo', 'Flores', '1',
      'Condomino Los Arboles Casa 10, Valparaiso', '2000-07-25', '0');

-- -----------------------------------------------------
-- Table `mydb`.`Carga_Familiar`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Carga_Familiar` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Carga_Familiar` (
  `idCarga_Familiar` VARCHAR(20) NOT NULL,
  `Personal_idPersonal` VARCHAR(20) NOT NULL,
  `parentesco` ENUM('1', '2', '3') NOT NULL DEFAULT '3',
  `sexo` ENUM('0', '1', '2') NOT NULL DEFAULT '0',
  `fechaNac` DATETIME NOT NULL,
  `nombreCompleto` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idCarga_Familiar`),
  INDEX `fk_Carga_Familiar_Personal1_idx` (`Personal_idPersonal` ASC),
  UNIQUE INDEX `idCarga_Familiar_UNIQUE` (`idCarga_Familiar` ASC),
  CONSTRAINT `fk_Carga_Familiar_Personal1`
    FOREIGN KEY (`Personal_idPersonal`)
    REFERENCES `mydb`.`Personal` (`idPersonal`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`Proyecto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Proyecto` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Proyecto` (
  `NumeroUnico` INT NOT NULL,
  `Departamento_codigoUnico` INT NOT NULL,
  `ubicacion` VARCHAR(45) NOT NULL,
  `nombre` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`NumeroUnico`),
  UNIQUE INDEX `NumeroUnico_UNIQUE` (`NumeroUnico` ASC),
  INDEX `fk_Proyecto_Departamento1_idx` (`Departamento_codigoUnico` ASC),
  CONSTRAINT `fk_Proyecto_Departamento1`
    FOREIGN KEY (`Departamento_codigoUnico`)
    REFERENCES `mydb`.`Departamento` (`codigoUnico`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
-- -----------------------------------------------------
-- Poblar Table `mydb`.`Proyecto`
-- -----------------------------------------------------
INSERT INTO Proyecto(NumeroUnico, Departamento_codigoUnico, ubicacion, nombre)
    Values
    ('55500' , '024' , 'Brasil 2241, Valparaíso' , 'IBC PUCV'),
    ('67700' , '024' , 'Larrondo 1281, Coquimbo' , 'UCN'),
    ('56906' , '025' , '11 Norte 1225, Viña del Mar' , 'CFT PUCV'),
    ('38700' , '027' , 'Universidad 330, Valparaíso' , 'Campus Curauma'),
    ('34000' , '028' , 'El Bosque 1290, Viña del Mar' , 'Campus Sausalito');

-- -----------------------------------------------------
-- Table `mydb`.`Personal_Proyecto`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Personal_Proyecto` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Personal_Proyecto` (
  `Proyecto_NumeroUnico` INT NOT NULL,
  `Personal_idPersonal` VARCHAR(20) NOT NULL,
  `horas_Mensuales` FLOAT NULL,
  PRIMARY KEY (`Proyecto_NumeroUnico`, `Personal_idPersonal`),
  INDEX `fk_Personal_Proyecto_Personal1_idx` (`Personal_idPersonal` ASC),
  CONSTRAINT `fk_Personal_Proyecto_Proyecto1`
    FOREIGN KEY (`Proyecto_NumeroUnico`)
    REFERENCES `mydb`.`Proyecto` (`NumeroUnico`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Personal_Proyecto_Personal1`
    FOREIGN KEY (`Personal_idPersonal`)
    REFERENCES `mydb`.`Personal` (`idPersonal`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
-- -----------------------------------------------------
-- Poblar Table `mydb`.`Personal_Proyecto`
-- -----------------------------------------------------
INSERT INTO Personal_Proyecto(Proyecto_NumeroUnico, Personal_idPersonal, horas_Mensuales)
    Values
    ('624' , '6000' , '120' ),
    ('625' , '6001' , '110' ),
    ('626' , '6002' , '124' ),
    ('627' , '6003' , '123' ),
    ('628' , '6004' , '100' );

-- -----------------------------------------------------
-- Table `mydb`.`Oficina`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `mydb`.`Oficina` ;

CREATE TABLE IF NOT EXISTS `mydb`.`Oficina` (
  `idOficina` INT NOT NULL,
  `Departamento_codigoUnico` INT NOT NULL,
  `direccion` VARCHAR(45) NULL,
  PRIMARY KEY (`idOficina`),
  UNIQUE INDEX `idOficinas_UNIQUE` (`idOficina` ASC),
  INDEX `fk_Oficina_Departamento1_idx` (`Departamento_codigoUnico` ASC),
  CONSTRAINT `fk_Oficina_Departamento1`
    FOREIGN KEY (`Departamento_codigoUnico`)
    REFERENCES `mydb`.`Departamento` (`codigoUnico`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;
-- -----------------------------------------------------
-- Poblar Table `mydb`.`Oficina`
-- -----------------------------------------------------
INSERT INTO Oficina(IdOficina, Departamento_codigoUnico, direccion)
    Values
    ('724' , '024' , 'Central' ),
    ('725' , '025' , 'Norte' ),
    ('726' , '026' , 'Sur' ),
    ('727' , '027' , 'Este' ),
    ('728' , '028' , 'Oeste' );


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
